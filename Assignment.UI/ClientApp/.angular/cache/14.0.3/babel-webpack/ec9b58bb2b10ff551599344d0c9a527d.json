{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar Subject_1 = require('./Subject');\n\nvar queue_1 = require('./scheduler/queue');\n\nvar Subscription_1 = require('./Subscription');\n\nvar observeOn_1 = require('./operators/observeOn');\n\nvar ObjectUnsubscribedError_1 = require('./util/ObjectUnsubscribedError');\n\nvar SubjectSubscription_1 = require('./SubjectSubscription');\n/**\n * @class ReplaySubject<T>\n */\n\n\nvar ReplaySubject = function (_super) {\n  __extends(ReplaySubject, _super);\n\n  function ReplaySubject(bufferSize, windowTime, scheduler) {\n    if (bufferSize === void 0) {\n      bufferSize = Number.POSITIVE_INFINITY;\n    }\n\n    if (windowTime === void 0) {\n      windowTime = Number.POSITIVE_INFINITY;\n    }\n\n    _super.call(this);\n\n    this.scheduler = scheduler;\n    this._events = [];\n    this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n    this._windowTime = windowTime < 1 ? 1 : windowTime;\n  }\n\n  ReplaySubject.prototype.next = function (value) {\n    var now = this._getNow();\n\n    this._events.push(new ReplayEvent(now, value));\n\n    this._trimBufferThenGetEvents();\n\n    _super.prototype.next.call(this, value);\n  };\n  /** @deprecated internal use only */\n\n\n  ReplaySubject.prototype._subscribe = function (subscriber) {\n    var _events = this._trimBufferThenGetEvents();\n\n    var scheduler = this.scheduler;\n    var subscription;\n\n    if (this.closed) {\n      throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n    } else if (this.hasError) {\n      subscription = Subscription_1.Subscription.EMPTY;\n    } else if (this.isStopped) {\n      subscription = Subscription_1.Subscription.EMPTY;\n    } else {\n      this.observers.push(subscriber);\n      subscription = new SubjectSubscription_1.SubjectSubscription(this, subscriber);\n    }\n\n    if (scheduler) {\n      subscriber.add(subscriber = new observeOn_1.ObserveOnSubscriber(subscriber, scheduler));\n    }\n\n    var len = _events.length;\n\n    for (var i = 0; i < len && !subscriber.closed; i++) {\n      subscriber.next(_events[i].value);\n    }\n\n    if (this.hasError) {\n      subscriber.error(this.thrownError);\n    } else if (this.isStopped) {\n      subscriber.complete();\n    }\n\n    return subscription;\n  };\n\n  ReplaySubject.prototype._getNow = function () {\n    return (this.scheduler || queue_1.queue).now();\n  };\n\n  ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n    var now = this._getNow();\n\n    var _bufferSize = this._bufferSize;\n    var _windowTime = this._windowTime;\n    var _events = this._events;\n    var eventsCount = _events.length;\n    var spliceCount = 0; // Trim events that fall out of the time window.\n    // Start at the front of the list. Break early once\n    // we encounter an event that falls within the window.\n\n    while (spliceCount < eventsCount) {\n      if (now - _events[spliceCount].time < _windowTime) {\n        break;\n      }\n\n      spliceCount++;\n    }\n\n    if (eventsCount > _bufferSize) {\n      spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n    }\n\n    if (spliceCount > 0) {\n      _events.splice(0, spliceCount);\n    }\n\n    return _events;\n  };\n\n  return ReplaySubject;\n}(Subject_1.Subject);\n\nexports.ReplaySubject = ReplaySubject;\n\nvar ReplayEvent = function () {\n  function ReplayEvent(time, value) {\n    this.time = time;\n    this.value = value;\n  }\n\n  return ReplayEvent;\n}();","map":{"version":3,"names":["__extends","d","b","p","hasOwnProperty","__","constructor","prototype","Object","create","Subject_1","require","queue_1","Subscription_1","observeOn_1","ObjectUnsubscribedError_1","SubjectSubscription_1","ReplaySubject","_super","bufferSize","windowTime","scheduler","Number","POSITIVE_INFINITY","call","_events","_bufferSize","_windowTime","next","value","now","_getNow","push","ReplayEvent","_trimBufferThenGetEvents","_subscribe","subscriber","subscription","closed","ObjectUnsubscribedError","hasError","Subscription","EMPTY","isStopped","observers","SubjectSubscription","add","ObserveOnSubscriber","len","length","i","error","thrownError","complete","queue","eventsCount","spliceCount","time","Math","max","splice","Subject","exports"],"sources":["C:/Users/vidit.jain/node_modules/rxjs/ReplaySubject.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subject_1 = require('./Subject');\nvar queue_1 = require('./scheduler/queue');\nvar Subscription_1 = require('./Subscription');\nvar observeOn_1 = require('./operators/observeOn');\nvar ObjectUnsubscribedError_1 = require('./util/ObjectUnsubscribedError');\nvar SubjectSubscription_1 = require('./SubjectSubscription');\n/**\n * @class ReplaySubject<T>\n */\nvar ReplaySubject = (function (_super) {\n    __extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) { bufferSize = Number.POSITIVE_INFINITY; }\n        if (windowTime === void 0) { windowTime = Number.POSITIVE_INFINITY; }\n        _super.call(this);\n        this.scheduler = scheduler;\n        this._events = [];\n        this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        this._windowTime = windowTime < 1 ? 1 : windowTime;\n    }\n    ReplaySubject.prototype.next = function (value) {\n        var now = this._getNow();\n        this._events.push(new ReplayEvent(now, value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    /** @deprecated internal use only */ ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _events = this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscription = Subscription_1.Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscription = Subscription_1.Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription_1.SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new observeOn_1.ObserveOnSubscriber(subscriber, scheduler));\n        }\n        var len = _events.length;\n        for (var i = 0; i < len && !subscriber.closed; i++) {\n            subscriber.next(_events[i].value);\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue_1.queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        // Trim events that fall out of the time window.\n        // Start at the front of the list. Break early once\n        // we encounter an event that falls within the window.\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject_1.Subject));\nexports.ReplaySubject = ReplaySubject;\nvar ReplayEvent = (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}
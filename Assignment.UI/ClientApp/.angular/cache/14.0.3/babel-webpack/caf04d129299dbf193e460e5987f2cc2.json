{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar Subject_1 = require('../../Subject');\n\nvar Subscriber_1 = require('../../Subscriber');\n\nvar Observable_1 = require('../../Observable');\n\nvar Subscription_1 = require('../../Subscription');\n\nvar root_1 = require('../../util/root');\n\nvar ReplaySubject_1 = require('../../ReplaySubject');\n\nvar tryCatch_1 = require('../../util/tryCatch');\n\nvar errorObject_1 = require('../../util/errorObject');\n\nvar assign_1 = require('../../util/assign');\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\n\n\nvar WebSocketSubject = function (_super) {\n  __extends(WebSocketSubject, _super);\n\n  function WebSocketSubject(urlConfigOrSource, destination) {\n    if (urlConfigOrSource instanceof Observable_1.Observable) {\n      _super.call(this, destination, urlConfigOrSource);\n    } else {\n      _super.call(this);\n\n      this.WebSocketCtor = root_1.root.WebSocket;\n      this._output = new Subject_1.Subject();\n\n      if (typeof urlConfigOrSource === 'string') {\n        this.url = urlConfigOrSource;\n      } else {\n        // WARNING: config object could override important members here.\n        assign_1.assign(this, urlConfigOrSource);\n      }\n\n      if (!this.WebSocketCtor) {\n        throw new Error('no WebSocket constructor can be found');\n      }\n\n      this.destination = new ReplaySubject_1.ReplaySubject();\n    }\n  }\n\n  WebSocketSubject.prototype.resultSelector = function (e) {\n    return JSON.parse(e.data);\n  };\n  /**\n   * Wrapper around the w3c-compatible WebSocket object provided by the browser.\n   *\n   * @example <caption>Wraps browser WebSocket</caption>\n   *\n   * let socket$ = Observable.webSocket('ws://localhost:8081');\n   *\n   * socket$.subscribe(\n   *    (msg) => console.log('message received: ' + msg),\n   *    (err) => console.log(err),\n   *    () => console.log('complete')\n   *  );\n   *\n   * socket$.next(JSON.stringify({ op: 'hello' }));\n   *\n   * @example <caption>Wraps WebSocket from nodejs-websocket (using node.js)</caption>\n   *\n   * import { w3cwebsocket } from 'websocket';\n   *\n   * let socket$ = Observable.webSocket({\n   *   url: 'ws://localhost:8081',\n   *   WebSocketCtor: w3cwebsocket\n   * });\n   *\n   * socket$.subscribe(\n   *    (msg) => console.log('message received: ' + msg),\n   *    (err) => console.log(err),\n   *    () => console.log('complete')\n   *  );\n   *\n   * socket$.next(JSON.stringify({ op: 'hello' }));\n   *\n   * @param {string | WebSocketSubjectConfig} urlConfigOrSource the source of the websocket as an url or a structure defining the websocket object\n   * @return {WebSocketSubject}\n   * @static true\n   * @name webSocket\n   * @owner Observable\n   */\n\n\n  WebSocketSubject.create = function (urlConfigOrSource) {\n    return new WebSocketSubject(urlConfigOrSource);\n  };\n\n  WebSocketSubject.prototype.lift = function (operator) {\n    var sock = new WebSocketSubject(this, this.destination);\n    sock.operator = operator;\n    return sock;\n  };\n\n  WebSocketSubject.prototype._resetState = function () {\n    this.socket = null;\n\n    if (!this.source) {\n      this.destination = new ReplaySubject_1.ReplaySubject();\n    }\n\n    this._output = new Subject_1.Subject();\n  }; // TODO: factor this out to be a proper Operator/Subscriber implementation and eliminate closures\n\n\n  WebSocketSubject.prototype.multiplex = function (subMsg, unsubMsg, messageFilter) {\n    var self = this;\n    return new Observable_1.Observable(function (observer) {\n      var result = tryCatch_1.tryCatch(subMsg)();\n\n      if (result === errorObject_1.errorObject) {\n        observer.error(errorObject_1.errorObject.e);\n      } else {\n        self.next(result);\n      }\n\n      var subscription = self.subscribe(function (x) {\n        var result = tryCatch_1.tryCatch(messageFilter)(x);\n\n        if (result === errorObject_1.errorObject) {\n          observer.error(errorObject_1.errorObject.e);\n        } else if (result) {\n          observer.next(x);\n        }\n      }, function (err) {\n        return observer.error(err);\n      }, function () {\n        return observer.complete();\n      });\n      return function () {\n        var result = tryCatch_1.tryCatch(unsubMsg)();\n\n        if (result === errorObject_1.errorObject) {\n          observer.error(errorObject_1.errorObject.e);\n        } else {\n          self.next(result);\n        }\n\n        subscription.unsubscribe();\n      };\n    });\n  };\n\n  WebSocketSubject.prototype._connectSocket = function () {\n    var _this = this;\n\n    var WebSocketCtor = this.WebSocketCtor;\n    var observer = this._output;\n    var socket = null;\n\n    try {\n      socket = this.protocol ? new WebSocketCtor(this.url, this.protocol) : new WebSocketCtor(this.url);\n      this.socket = socket;\n\n      if (this.binaryType) {\n        this.socket.binaryType = this.binaryType;\n      }\n    } catch (e) {\n      observer.error(e);\n      return;\n    }\n\n    var subscription = new Subscription_1.Subscription(function () {\n      _this.socket = null;\n\n      if (socket && socket.readyState === 1) {\n        socket.close();\n      }\n    });\n\n    socket.onopen = function (e) {\n      var openObserver = _this.openObserver;\n\n      if (openObserver) {\n        openObserver.next(e);\n      }\n\n      var queue = _this.destination;\n      _this.destination = Subscriber_1.Subscriber.create(function (x) {\n        return socket.readyState === 1 && socket.send(x);\n      }, function (e) {\n        var closingObserver = _this.closingObserver;\n\n        if (closingObserver) {\n          closingObserver.next(undefined);\n        }\n\n        if (e && e.code) {\n          socket.close(e.code, e.reason);\n        } else {\n          observer.error(new TypeError('WebSocketSubject.error must be called with an object with an error code, ' + 'and an optional reason: { code: number, reason: string }'));\n        }\n\n        _this._resetState();\n      }, function () {\n        var closingObserver = _this.closingObserver;\n\n        if (closingObserver) {\n          closingObserver.next(undefined);\n        }\n\n        socket.close();\n\n        _this._resetState();\n      });\n\n      if (queue && queue instanceof ReplaySubject_1.ReplaySubject) {\n        subscription.add(queue.subscribe(_this.destination));\n      }\n    };\n\n    socket.onerror = function (e) {\n      _this._resetState();\n\n      observer.error(e);\n    };\n\n    socket.onclose = function (e) {\n      _this._resetState();\n\n      var closeObserver = _this.closeObserver;\n\n      if (closeObserver) {\n        closeObserver.next(e);\n      }\n\n      if (e.wasClean) {\n        observer.complete();\n      } else {\n        observer.error(e);\n      }\n    };\n\n    socket.onmessage = function (e) {\n      var result = tryCatch_1.tryCatch(_this.resultSelector)(e);\n\n      if (result === errorObject_1.errorObject) {\n        observer.error(errorObject_1.errorObject.e);\n      } else {\n        observer.next(result);\n      }\n    };\n  };\n  /** @deprecated internal use only */\n\n\n  WebSocketSubject.prototype._subscribe = function (subscriber) {\n    var _this = this;\n\n    var source = this.source;\n\n    if (source) {\n      return source.subscribe(subscriber);\n    }\n\n    if (!this.socket) {\n      this._connectSocket();\n    }\n\n    var subscription = new Subscription_1.Subscription();\n    subscription.add(this._output.subscribe(subscriber));\n    subscription.add(function () {\n      var socket = _this.socket;\n\n      if (_this._output.observers.length === 0) {\n        if (socket && socket.readyState === 1) {\n          socket.close();\n        }\n\n        _this._resetState();\n      }\n    });\n    return subscription;\n  };\n\n  WebSocketSubject.prototype.unsubscribe = function () {\n    var _a = this,\n        source = _a.source,\n        socket = _a.socket;\n\n    if (socket && socket.readyState === 1) {\n      socket.close();\n\n      this._resetState();\n    }\n\n    _super.prototype.unsubscribe.call(this);\n\n    if (!source) {\n      this.destination = new ReplaySubject_1.ReplaySubject();\n    }\n  };\n\n  return WebSocketSubject;\n}(Subject_1.AnonymousSubject);\n\nexports.WebSocketSubject = WebSocketSubject;","map":{"version":3,"names":["__extends","d","b","p","hasOwnProperty","__","constructor","prototype","Object","create","Subject_1","require","Subscriber_1","Observable_1","Subscription_1","root_1","ReplaySubject_1","tryCatch_1","errorObject_1","assign_1","WebSocketSubject","_super","urlConfigOrSource","destination","Observable","call","WebSocketCtor","root","WebSocket","_output","Subject","url","assign","Error","ReplaySubject","resultSelector","e","JSON","parse","data","lift","operator","sock","_resetState","socket","source","multiplex","subMsg","unsubMsg","messageFilter","self","observer","result","tryCatch","errorObject","error","next","subscription","subscribe","x","err","complete","unsubscribe","_connectSocket","_this","protocol","binaryType","Subscription","readyState","close","onopen","openObserver","queue","Subscriber","send","closingObserver","undefined","code","reason","TypeError","add","onerror","onclose","closeObserver","wasClean","onmessage","_subscribe","subscriber","observers","length","_a","AnonymousSubject","exports"],"sources":["C:/Users/vidit.jain/node_modules/rxjs/observable/dom/WebSocketSubject.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subject_1 = require('../../Subject');\nvar Subscriber_1 = require('../../Subscriber');\nvar Observable_1 = require('../../Observable');\nvar Subscription_1 = require('../../Subscription');\nvar root_1 = require('../../util/root');\nvar ReplaySubject_1 = require('../../ReplaySubject');\nvar tryCatch_1 = require('../../util/tryCatch');\nvar errorObject_1 = require('../../util/errorObject');\nvar assign_1 = require('../../util/assign');\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\nvar WebSocketSubject = (function (_super) {\n    __extends(WebSocketSubject, _super);\n    function WebSocketSubject(urlConfigOrSource, destination) {\n        if (urlConfigOrSource instanceof Observable_1.Observable) {\n            _super.call(this, destination, urlConfigOrSource);\n        }\n        else {\n            _super.call(this);\n            this.WebSocketCtor = root_1.root.WebSocket;\n            this._output = new Subject_1.Subject();\n            if (typeof urlConfigOrSource === 'string') {\n                this.url = urlConfigOrSource;\n            }\n            else {\n                // WARNING: config object could override important members here.\n                assign_1.assign(this, urlConfigOrSource);\n            }\n            if (!this.WebSocketCtor) {\n                throw new Error('no WebSocket constructor can be found');\n            }\n            this.destination = new ReplaySubject_1.ReplaySubject();\n        }\n    }\n    WebSocketSubject.prototype.resultSelector = function (e) {\n        return JSON.parse(e.data);\n    };\n    /**\n     * Wrapper around the w3c-compatible WebSocket object provided by the browser.\n     *\n     * @example <caption>Wraps browser WebSocket</caption>\n     *\n     * let socket$ = Observable.webSocket('ws://localhost:8081');\n     *\n     * socket$.subscribe(\n     *    (msg) => console.log('message received: ' + msg),\n     *    (err) => console.log(err),\n     *    () => console.log('complete')\n     *  );\n     *\n     * socket$.next(JSON.stringify({ op: 'hello' }));\n     *\n     * @example <caption>Wraps WebSocket from nodejs-websocket (using node.js)</caption>\n     *\n     * import { w3cwebsocket } from 'websocket';\n     *\n     * let socket$ = Observable.webSocket({\n     *   url: 'ws://localhost:8081',\n     *   WebSocketCtor: w3cwebsocket\n     * });\n     *\n     * socket$.subscribe(\n     *    (msg) => console.log('message received: ' + msg),\n     *    (err) => console.log(err),\n     *    () => console.log('complete')\n     *  );\n     *\n     * socket$.next(JSON.stringify({ op: 'hello' }));\n     *\n     * @param {string | WebSocketSubjectConfig} urlConfigOrSource the source of the websocket as an url or a structure defining the websocket object\n     * @return {WebSocketSubject}\n     * @static true\n     * @name webSocket\n     * @owner Observable\n     */\n    WebSocketSubject.create = function (urlConfigOrSource) {\n        return new WebSocketSubject(urlConfigOrSource);\n    };\n    WebSocketSubject.prototype.lift = function (operator) {\n        var sock = new WebSocketSubject(this, this.destination);\n        sock.operator = operator;\n        return sock;\n    };\n    WebSocketSubject.prototype._resetState = function () {\n        this.socket = null;\n        if (!this.source) {\n            this.destination = new ReplaySubject_1.ReplaySubject();\n        }\n        this._output = new Subject_1.Subject();\n    };\n    // TODO: factor this out to be a proper Operator/Subscriber implementation and eliminate closures\n    WebSocketSubject.prototype.multiplex = function (subMsg, unsubMsg, messageFilter) {\n        var self = this;\n        return new Observable_1.Observable(function (observer) {\n            var result = tryCatch_1.tryCatch(subMsg)();\n            if (result === errorObject_1.errorObject) {\n                observer.error(errorObject_1.errorObject.e);\n            }\n            else {\n                self.next(result);\n            }\n            var subscription = self.subscribe(function (x) {\n                var result = tryCatch_1.tryCatch(messageFilter)(x);\n                if (result === errorObject_1.errorObject) {\n                    observer.error(errorObject_1.errorObject.e);\n                }\n                else if (result) {\n                    observer.next(x);\n                }\n            }, function (err) { return observer.error(err); }, function () { return observer.complete(); });\n            return function () {\n                var result = tryCatch_1.tryCatch(unsubMsg)();\n                if (result === errorObject_1.errorObject) {\n                    observer.error(errorObject_1.errorObject.e);\n                }\n                else {\n                    self.next(result);\n                }\n                subscription.unsubscribe();\n            };\n        });\n    };\n    WebSocketSubject.prototype._connectSocket = function () {\n        var _this = this;\n        var WebSocketCtor = this.WebSocketCtor;\n        var observer = this._output;\n        var socket = null;\n        try {\n            socket = this.protocol ?\n                new WebSocketCtor(this.url, this.protocol) :\n                new WebSocketCtor(this.url);\n            this.socket = socket;\n            if (this.binaryType) {\n                this.socket.binaryType = this.binaryType;\n            }\n        }\n        catch (e) {\n            observer.error(e);\n            return;\n        }\n        var subscription = new Subscription_1.Subscription(function () {\n            _this.socket = null;\n            if (socket && socket.readyState === 1) {\n                socket.close();\n            }\n        });\n        socket.onopen = function (e) {\n            var openObserver = _this.openObserver;\n            if (openObserver) {\n                openObserver.next(e);\n            }\n            var queue = _this.destination;\n            _this.destination = Subscriber_1.Subscriber.create(function (x) { return socket.readyState === 1 && socket.send(x); }, function (e) {\n                var closingObserver = _this.closingObserver;\n                if (closingObserver) {\n                    closingObserver.next(undefined);\n                }\n                if (e && e.code) {\n                    socket.close(e.code, e.reason);\n                }\n                else {\n                    observer.error(new TypeError('WebSocketSubject.error must be called with an object with an error code, ' +\n                        'and an optional reason: { code: number, reason: string }'));\n                }\n                _this._resetState();\n            }, function () {\n                var closingObserver = _this.closingObserver;\n                if (closingObserver) {\n                    closingObserver.next(undefined);\n                }\n                socket.close();\n                _this._resetState();\n            });\n            if (queue && queue instanceof ReplaySubject_1.ReplaySubject) {\n                subscription.add(queue.subscribe(_this.destination));\n            }\n        };\n        socket.onerror = function (e) {\n            _this._resetState();\n            observer.error(e);\n        };\n        socket.onclose = function (e) {\n            _this._resetState();\n            var closeObserver = _this.closeObserver;\n            if (closeObserver) {\n                closeObserver.next(e);\n            }\n            if (e.wasClean) {\n                observer.complete();\n            }\n            else {\n                observer.error(e);\n            }\n        };\n        socket.onmessage = function (e) {\n            var result = tryCatch_1.tryCatch(_this.resultSelector)(e);\n            if (result === errorObject_1.errorObject) {\n                observer.error(errorObject_1.errorObject.e);\n            }\n            else {\n                observer.next(result);\n            }\n        };\n    };\n    /** @deprecated internal use only */ WebSocketSubject.prototype._subscribe = function (subscriber) {\n        var _this = this;\n        var source = this.source;\n        if (source) {\n            return source.subscribe(subscriber);\n        }\n        if (!this.socket) {\n            this._connectSocket();\n        }\n        var subscription = new Subscription_1.Subscription();\n        subscription.add(this._output.subscribe(subscriber));\n        subscription.add(function () {\n            var socket = _this.socket;\n            if (_this._output.observers.length === 0) {\n                if (socket && socket.readyState === 1) {\n                    socket.close();\n                }\n                _this._resetState();\n            }\n        });\n        return subscription;\n    };\n    WebSocketSubject.prototype.unsubscribe = function () {\n        var _a = this, source = _a.source, socket = _a.socket;\n        if (socket && socket.readyState === 1) {\n            socket.close();\n            this._resetState();\n        }\n        _super.prototype.unsubscribe.call(this);\n        if (!source) {\n            this.destination = new ReplaySubject_1.ReplaySubject();\n        }\n    };\n    return WebSocketSubject;\n}(Subject_1.AnonymousSubject));\nexports.WebSocketSubject = WebSocketSubject;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}
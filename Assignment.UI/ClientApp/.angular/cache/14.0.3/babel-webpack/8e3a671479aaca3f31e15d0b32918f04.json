{"ast":null,"code":"\"use strict\";\n\nvar root_1 = require('./root');\n\nvar isArrayLike_1 = require('./isArrayLike');\n\nvar isPromise_1 = require('./isPromise');\n\nvar isObject_1 = require('./isObject');\n\nvar Observable_1 = require('../Observable');\n\nvar iterator_1 = require('../symbol/iterator');\n\nvar InnerSubscriber_1 = require('../InnerSubscriber');\n\nvar observable_1 = require('../symbol/observable');\n\nfunction subscribeToResult(outerSubscriber, result, outerValue, outerIndex) {\n  var destination = new InnerSubscriber_1.InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n\n  if (destination.closed) {\n    return null;\n  }\n\n  if (result instanceof Observable_1.Observable) {\n    if (result._isScalar) {\n      destination.next(result.value);\n      destination.complete();\n      return null;\n    } else {\n      destination.syncErrorThrowable = true;\n      return result.subscribe(destination);\n    }\n  } else if (isArrayLike_1.isArrayLike(result)) {\n    for (var i = 0, len = result.length; i < len && !destination.closed; i++) {\n      destination.next(result[i]);\n    }\n\n    if (!destination.closed) {\n      destination.complete();\n    }\n  } else if (isPromise_1.isPromise(result)) {\n    result.then(function (value) {\n      if (!destination.closed) {\n        destination.next(value);\n        destination.complete();\n      }\n    }, function (err) {\n      return destination.error(err);\n    }).then(null, function (err) {\n      // Escaping the Promise trap: globally throw unhandled errors\n      root_1.root.setTimeout(function () {\n        throw err;\n      });\n    });\n    return destination;\n  } else if (result && typeof result[iterator_1.iterator] === 'function') {\n    var iterator = result[iterator_1.iterator]();\n\n    do {\n      var item = iterator.next();\n\n      if (item.done) {\n        destination.complete();\n        break;\n      }\n\n      destination.next(item.value);\n\n      if (destination.closed) {\n        break;\n      }\n    } while (true);\n  } else if (result && typeof result[observable_1.observable] === 'function') {\n    var obs = result[observable_1.observable]();\n\n    if (typeof obs.subscribe !== 'function') {\n      destination.error(new TypeError('Provided object does not correctly implement Symbol.observable'));\n    } else {\n      return obs.subscribe(new InnerSubscriber_1.InnerSubscriber(outerSubscriber, outerValue, outerIndex));\n    }\n  } else {\n    var value = isObject_1.isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n    var msg = \"You provided \" + value + \" where a stream was expected.\" + ' You can provide an Observable, Promise, Array, or Iterable.';\n    destination.error(new TypeError(msg));\n  }\n\n  return null;\n}\n\nexports.subscribeToResult = subscribeToResult;","map":{"version":3,"names":["root_1","require","isArrayLike_1","isPromise_1","isObject_1","Observable_1","iterator_1","InnerSubscriber_1","observable_1","subscribeToResult","outerSubscriber","result","outerValue","outerIndex","destination","InnerSubscriber","closed","Observable","_isScalar","next","value","complete","syncErrorThrowable","subscribe","isArrayLike","i","len","length","isPromise","then","err","error","root","setTimeout","iterator","item","done","observable","obs","TypeError","isObject","msg","exports"],"sources":["C:/Users/vidit.jain/node_modules/rxjs/util/subscribeToResult.js"],"sourcesContent":["\"use strict\";\nvar root_1 = require('./root');\nvar isArrayLike_1 = require('./isArrayLike');\nvar isPromise_1 = require('./isPromise');\nvar isObject_1 = require('./isObject');\nvar Observable_1 = require('../Observable');\nvar iterator_1 = require('../symbol/iterator');\nvar InnerSubscriber_1 = require('../InnerSubscriber');\nvar observable_1 = require('../symbol/observable');\nfunction subscribeToResult(outerSubscriber, result, outerValue, outerIndex) {\n    var destination = new InnerSubscriber_1.InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    if (destination.closed) {\n        return null;\n    }\n    if (result instanceof Observable_1.Observable) {\n        if (result._isScalar) {\n            destination.next(result.value);\n            destination.complete();\n            return null;\n        }\n        else {\n            destination.syncErrorThrowable = true;\n            return result.subscribe(destination);\n        }\n    }\n    else if (isArrayLike_1.isArrayLike(result)) {\n        for (var i = 0, len = result.length; i < len && !destination.closed; i++) {\n            destination.next(result[i]);\n        }\n        if (!destination.closed) {\n            destination.complete();\n        }\n    }\n    else if (isPromise_1.isPromise(result)) {\n        result.then(function (value) {\n            if (!destination.closed) {\n                destination.next(value);\n                destination.complete();\n            }\n        }, function (err) { return destination.error(err); })\n            .then(null, function (err) {\n            // Escaping the Promise trap: globally throw unhandled errors\n            root_1.root.setTimeout(function () { throw err; });\n        });\n        return destination;\n    }\n    else if (result && typeof result[iterator_1.iterator] === 'function') {\n        var iterator = result[iterator_1.iterator]();\n        do {\n            var item = iterator.next();\n            if (item.done) {\n                destination.complete();\n                break;\n            }\n            destination.next(item.value);\n            if (destination.closed) {\n                break;\n            }\n        } while (true);\n    }\n    else if (result && typeof result[observable_1.observable] === 'function') {\n        var obs = result[observable_1.observable]();\n        if (typeof obs.subscribe !== 'function') {\n            destination.error(new TypeError('Provided object does not correctly implement Symbol.observable'));\n        }\n        else {\n            return obs.subscribe(new InnerSubscriber_1.InnerSubscriber(outerSubscriber, outerValue, outerIndex));\n        }\n    }\n    else {\n        var value = isObject_1.isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = (\"You provided \" + value + \" where a stream was expected.\")\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        destination.error(new TypeError(msg));\n    }\n    return null;\n}\nexports.subscribeToResult = subscribeToResult;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar root_1 = require('../../util/root');\n\nvar tryCatch_1 = require('../../util/tryCatch');\n\nvar errorObject_1 = require('../../util/errorObject');\n\nvar Observable_1 = require('../../Observable');\n\nvar Subscriber_1 = require('../../Subscriber');\n\nvar map_1 = require('../../operators/map');\n\nfunction getCORSRequest() {\n  if (root_1.root.XMLHttpRequest) {\n    return new root_1.root.XMLHttpRequest();\n  } else if (!!root_1.root.XDomainRequest) {\n    return new root_1.root.XDomainRequest();\n  } else {\n    throw new Error('CORS is not supported by your browser');\n  }\n}\n\nfunction getXMLHttpRequest() {\n  if (root_1.root.XMLHttpRequest) {\n    return new root_1.root.XMLHttpRequest();\n  } else {\n    var progId = void 0;\n\n    try {\n      var progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'];\n\n      for (var i = 0; i < 3; i++) {\n        try {\n          progId = progIds[i];\n\n          if (new root_1.root.ActiveXObject(progId)) {\n            break;\n          }\n        } catch (e) {}\n      }\n\n      return new root_1.root.ActiveXObject(progId);\n    } catch (e) {\n      throw new Error('XMLHttpRequest is not supported by your browser');\n    }\n  }\n}\n\nfunction ajaxGet(url, headers) {\n  if (headers === void 0) {\n    headers = null;\n  }\n\n  return new AjaxObservable({\n    method: 'GET',\n    url: url,\n    headers: headers\n  });\n}\n\nexports.ajaxGet = ajaxGet;\n;\n\nfunction ajaxPost(url, body, headers) {\n  return new AjaxObservable({\n    method: 'POST',\n    url: url,\n    body: body,\n    headers: headers\n  });\n}\n\nexports.ajaxPost = ajaxPost;\n;\n\nfunction ajaxDelete(url, headers) {\n  return new AjaxObservable({\n    method: 'DELETE',\n    url: url,\n    headers: headers\n  });\n}\n\nexports.ajaxDelete = ajaxDelete;\n;\n\nfunction ajaxPut(url, body, headers) {\n  return new AjaxObservable({\n    method: 'PUT',\n    url: url,\n    body: body,\n    headers: headers\n  });\n}\n\nexports.ajaxPut = ajaxPut;\n;\n\nfunction ajaxPatch(url, body, headers) {\n  return new AjaxObservable({\n    method: 'PATCH',\n    url: url,\n    body: body,\n    headers: headers\n  });\n}\n\nexports.ajaxPatch = ajaxPatch;\n;\nvar mapResponse = map_1.map(function (x, index) {\n  return x.response;\n});\n\nfunction ajaxGetJSON(url, headers) {\n  return mapResponse(new AjaxObservable({\n    method: 'GET',\n    url: url,\n    responseType: 'json',\n    headers: headers\n  }));\n}\n\nexports.ajaxGetJSON = ajaxGetJSON;\n;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\n\nvar AjaxObservable = function (_super) {\n  __extends(AjaxObservable, _super);\n\n  function AjaxObservable(urlOrRequest) {\n    _super.call(this);\n\n    var request = {\n      async: true,\n      createXHR: function () {\n        return this.crossDomain ? getCORSRequest.call(this) : getXMLHttpRequest();\n      },\n      crossDomain: false,\n      withCredentials: false,\n      headers: {},\n      method: 'GET',\n      responseType: 'json',\n      timeout: 0\n    };\n\n    if (typeof urlOrRequest === 'string') {\n      request.url = urlOrRequest;\n    } else {\n      for (var prop in urlOrRequest) {\n        if (urlOrRequest.hasOwnProperty(prop)) {\n          request[prop] = urlOrRequest[prop];\n        }\n      }\n    }\n\n    this.request = request;\n  }\n  /** @deprecated internal use only */\n\n\n  AjaxObservable.prototype._subscribe = function (subscriber) {\n    return new AjaxSubscriber(subscriber, this.request);\n  };\n  /**\n   * Creates an observable for an Ajax request with either a request object with\n   * url, headers, etc or a string for a URL.\n   *\n   * @example\n   * source = Rx.Observable.ajax('/products');\n   * source = Rx.Observable.ajax({ url: 'products', method: 'GET' });\n   *\n   * @param {string|Object} request Can be one of the following:\n   *   A string of the URL to make the Ajax call.\n   *   An object with the following properties\n   *   - url: URL of the request\n   *   - body: The body of the request\n   *   - method: Method of the request, such as GET, POST, PUT, PATCH, DELETE\n   *   - async: Whether the request is async\n   *   - headers: Optional headers\n   *   - crossDomain: true if a cross domain request, else false\n   *   - createXHR: a function to override if you need to use an alternate\n   *   XMLHttpRequest implementation.\n   *   - resultSelector: a function to use to alter the output value type of\n   *   the Observable. Gets {@link AjaxResponse} as an argument.\n   * @return {Observable} An observable sequence containing the XMLHttpRequest.\n   * @static true\n   * @name ajax\n   * @owner Observable\n  */\n\n\n  AjaxObservable.create = function () {\n    var create = function (urlOrRequest) {\n      return new AjaxObservable(urlOrRequest);\n    };\n\n    create.get = ajaxGet;\n    create.post = ajaxPost;\n    create.delete = ajaxDelete;\n    create.put = ajaxPut;\n    create.patch = ajaxPatch;\n    create.getJSON = ajaxGetJSON;\n    return create;\n  }();\n\n  return AjaxObservable;\n}(Observable_1.Observable);\n\nexports.AjaxObservable = AjaxObservable;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\n\nvar AjaxSubscriber = function (_super) {\n  __extends(AjaxSubscriber, _super);\n\n  function AjaxSubscriber(destination, request) {\n    _super.call(this, destination);\n\n    this.request = request;\n    this.done = false;\n    var headers = request.headers = request.headers || {}; // force CORS if requested\n\n    if (!request.crossDomain && !headers['X-Requested-With']) {\n      headers['X-Requested-With'] = 'XMLHttpRequest';\n    } // ensure content type is set\n\n\n    if (!('Content-Type' in headers) && !(root_1.root.FormData && request.body instanceof root_1.root.FormData) && typeof request.body !== 'undefined') {\n      headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\n    } // properly serialize body\n\n\n    request.body = this.serializeBody(request.body, request.headers['Content-Type']);\n    this.send();\n  }\n\n  AjaxSubscriber.prototype.next = function (e) {\n    this.done = true;\n\n    var _a = this,\n        xhr = _a.xhr,\n        request = _a.request,\n        destination = _a.destination;\n\n    var response = new AjaxResponse(e, xhr, request);\n    destination.next(response);\n  };\n\n  AjaxSubscriber.prototype.send = function () {\n    var _a = this,\n        request = _a.request,\n        _b = _a.request,\n        user = _b.user,\n        method = _b.method,\n        url = _b.url,\n        async = _b.async,\n        password = _b.password,\n        headers = _b.headers,\n        body = _b.body;\n\n    var createXHR = request.createXHR;\n    var xhr = tryCatch_1.tryCatch(createXHR).call(request);\n\n    if (xhr === errorObject_1.errorObject) {\n      this.error(errorObject_1.errorObject.e);\n    } else {\n      this.xhr = xhr; // set up the events before open XHR\n      // https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest\n      // You need to add the event listeners before calling open() on the request.\n      // Otherwise the progress events will not fire.\n\n      this.setupEvents(xhr, request); // open XHR\n\n      var result = void 0;\n\n      if (user) {\n        result = tryCatch_1.tryCatch(xhr.open).call(xhr, method, url, async, user, password);\n      } else {\n        result = tryCatch_1.tryCatch(xhr.open).call(xhr, method, url, async);\n      }\n\n      if (result === errorObject_1.errorObject) {\n        this.error(errorObject_1.errorObject.e);\n        return null;\n      } // timeout, responseType and withCredentials can be set once the XHR is open\n\n\n      if (async) {\n        xhr.timeout = request.timeout;\n        xhr.responseType = request.responseType;\n      }\n\n      if ('withCredentials' in xhr) {\n        xhr.withCredentials = !!request.withCredentials;\n      } // set headers\n\n\n      this.setHeaders(xhr, headers); // finally send the request\n\n      result = body ? tryCatch_1.tryCatch(xhr.send).call(xhr, body) : tryCatch_1.tryCatch(xhr.send).call(xhr);\n\n      if (result === errorObject_1.errorObject) {\n        this.error(errorObject_1.errorObject.e);\n        return null;\n      }\n    }\n\n    return xhr;\n  };\n\n  AjaxSubscriber.prototype.serializeBody = function (body, contentType) {\n    if (!body || typeof body === 'string') {\n      return body;\n    } else if (root_1.root.FormData && body instanceof root_1.root.FormData) {\n      return body;\n    }\n\n    if (contentType) {\n      var splitIndex = contentType.indexOf(';');\n\n      if (splitIndex !== -1) {\n        contentType = contentType.substring(0, splitIndex);\n      }\n    }\n\n    switch (contentType) {\n      case 'application/x-www-form-urlencoded':\n        return Object.keys(body).map(function (key) {\n          return encodeURIComponent(key) + \"=\" + encodeURIComponent(body[key]);\n        }).join('&');\n\n      case 'application/json':\n        return JSON.stringify(body);\n\n      default:\n        return body;\n    }\n  };\n\n  AjaxSubscriber.prototype.setHeaders = function (xhr, headers) {\n    for (var key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, headers[key]);\n      }\n    }\n  };\n\n  AjaxSubscriber.prototype.setupEvents = function (xhr, request) {\n    var progressSubscriber = request.progressSubscriber;\n\n    function xhrTimeout(e) {\n      var _a = xhrTimeout,\n          subscriber = _a.subscriber,\n          progressSubscriber = _a.progressSubscriber,\n          request = _a.request;\n\n      if (progressSubscriber) {\n        progressSubscriber.error(e);\n      }\n\n      subscriber.error(new AjaxTimeoutError(this, request)); //TODO: Make betterer.\n    }\n\n    ;\n    xhr.ontimeout = xhrTimeout;\n    xhrTimeout.request = request;\n    xhrTimeout.subscriber = this;\n    xhrTimeout.progressSubscriber = progressSubscriber;\n\n    if (xhr.upload && 'withCredentials' in xhr) {\n      if (progressSubscriber) {\n        var xhrProgress_1;\n\n        xhrProgress_1 = function (e) {\n          var progressSubscriber = xhrProgress_1.progressSubscriber;\n          progressSubscriber.next(e);\n        };\n\n        if (root_1.root.XDomainRequest) {\n          xhr.onprogress = xhrProgress_1;\n        } else {\n          xhr.upload.onprogress = xhrProgress_1;\n        }\n\n        xhrProgress_1.progressSubscriber = progressSubscriber;\n      }\n\n      var xhrError_1;\n\n      xhrError_1 = function (e) {\n        var _a = xhrError_1,\n            progressSubscriber = _a.progressSubscriber,\n            subscriber = _a.subscriber,\n            request = _a.request;\n\n        if (progressSubscriber) {\n          progressSubscriber.error(e);\n        }\n\n        subscriber.error(new AjaxError('ajax error', this, request));\n      };\n\n      xhr.onerror = xhrError_1;\n      xhrError_1.request = request;\n      xhrError_1.subscriber = this;\n      xhrError_1.progressSubscriber = progressSubscriber;\n    }\n\n    function xhrReadyStateChange(e) {\n      var _a = xhrReadyStateChange,\n          subscriber = _a.subscriber,\n          progressSubscriber = _a.progressSubscriber,\n          request = _a.request;\n\n      if (this.readyState === 4) {\n        // normalize IE9 bug (http://bugs.jquery.com/ticket/1450)\n        var status_1 = this.status === 1223 ? 204 : this.status;\n        var response = this.responseType === 'text' ? this.response || this.responseText : this.response; // fix status code when it is 0 (0 status is undocumented).\n        // Occurs when accessing file resources or on Android 4.1 stock browser\n        // while retrieving files from application cache.\n\n        if (status_1 === 0) {\n          status_1 = response ? 200 : 0;\n        }\n\n        if (200 <= status_1 && status_1 < 300) {\n          if (progressSubscriber) {\n            progressSubscriber.complete();\n          }\n\n          subscriber.next(e);\n          subscriber.complete();\n        } else {\n          if (progressSubscriber) {\n            progressSubscriber.error(e);\n          }\n\n          subscriber.error(new AjaxError('ajax error ' + status_1, this, request));\n        }\n      }\n    }\n\n    ;\n    xhr.onreadystatechange = xhrReadyStateChange;\n    xhrReadyStateChange.subscriber = this;\n    xhrReadyStateChange.progressSubscriber = progressSubscriber;\n    xhrReadyStateChange.request = request;\n  };\n\n  AjaxSubscriber.prototype.unsubscribe = function () {\n    var _a = this,\n        done = _a.done,\n        xhr = _a.xhr;\n\n    if (!done && xhr && xhr.readyState !== 4 && typeof xhr.abort === 'function') {\n      xhr.abort();\n    }\n\n    _super.prototype.unsubscribe.call(this);\n  };\n\n  return AjaxSubscriber;\n}(Subscriber_1.Subscriber);\n\nexports.AjaxSubscriber = AjaxSubscriber;\n/**\n * A normalized AJAX response.\n *\n * @see {@link ajax}\n *\n * @class AjaxResponse\n */\n\nvar AjaxResponse = function () {\n  function AjaxResponse(originalEvent, xhr, request) {\n    this.originalEvent = originalEvent;\n    this.xhr = xhr;\n    this.request = request;\n    this.status = xhr.status;\n    this.responseType = xhr.responseType || request.responseType;\n    this.response = parseXhrResponse(this.responseType, xhr);\n  }\n\n  return AjaxResponse;\n}();\n\nexports.AjaxResponse = AjaxResponse;\n/**\n * A normalized AJAX error.\n *\n * @see {@link ajax}\n *\n * @class AjaxError\n */\n\nvar AjaxError = function (_super) {\n  __extends(AjaxError, _super);\n\n  function AjaxError(message, xhr, request) {\n    _super.call(this, message);\n\n    this.message = message;\n    this.xhr = xhr;\n    this.request = request;\n    this.status = xhr.status;\n    this.responseType = xhr.responseType || request.responseType;\n    this.response = parseXhrResponse(this.responseType, xhr);\n  }\n\n  return AjaxError;\n}(Error);\n\nexports.AjaxError = AjaxError;\n\nfunction parseXhrResponse(responseType, xhr) {\n  switch (responseType) {\n    case 'json':\n      if ('response' in xhr) {\n        //IE does not support json as responseType, parse it internally\n        return xhr.responseType ? xhr.response : JSON.parse(xhr.response || xhr.responseText || 'null');\n      } else {\n        // HACK(benlesh): TypeScript shennanigans\n        // tslint:disable-next-line:no-any latest TS seems to think xhr is \"never\" here.\n        return JSON.parse(xhr.responseText || 'null');\n      }\n\n    case 'xml':\n      return xhr.responseXML;\n\n    case 'text':\n    default:\n      // HACK(benlesh): TypeScript shennanigans\n      // tslint:disable-next-line:no-any latest TS seems to think xhr is \"never\" here.\n      return 'response' in xhr ? xhr.response : xhr.responseText;\n  }\n}\n/**\n * @see {@link ajax}\n *\n * @class AjaxTimeoutError\n */\n\n\nvar AjaxTimeoutError = function (_super) {\n  __extends(AjaxTimeoutError, _super);\n\n  function AjaxTimeoutError(xhr, request) {\n    _super.call(this, 'ajax timeout', xhr, request);\n  }\n\n  return AjaxTimeoutError;\n}(AjaxError);\n\nexports.AjaxTimeoutError = AjaxTimeoutError;","map":{"version":3,"names":["__extends","d","b","p","hasOwnProperty","__","constructor","prototype","Object","create","root_1","require","tryCatch_1","errorObject_1","Observable_1","Subscriber_1","map_1","getCORSRequest","root","XMLHttpRequest","XDomainRequest","Error","getXMLHttpRequest","progId","progIds","i","ActiveXObject","e","ajaxGet","url","headers","AjaxObservable","method","exports","ajaxPost","body","ajaxDelete","ajaxPut","ajaxPatch","mapResponse","map","x","index","response","ajaxGetJSON","responseType","_super","urlOrRequest","call","request","async","createXHR","crossDomain","withCredentials","timeout","prop","_subscribe","subscriber","AjaxSubscriber","get","post","delete","put","patch","getJSON","Observable","destination","done","FormData","serializeBody","send","next","_a","xhr","AjaxResponse","_b","user","password","tryCatch","errorObject","error","setupEvents","result","open","setHeaders","contentType","splitIndex","indexOf","substring","keys","key","encodeURIComponent","join","JSON","stringify","setRequestHeader","progressSubscriber","xhrTimeout","AjaxTimeoutError","ontimeout","upload","xhrProgress_1","onprogress","xhrError_1","AjaxError","onerror","xhrReadyStateChange","readyState","status_1","status","responseText","complete","onreadystatechange","unsubscribe","abort","Subscriber","originalEvent","parseXhrResponse","message","parse","responseXML"],"sources":["C:/Users/vidit.jain/node_modules/rxjs/observable/dom/AjaxObservable.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar root_1 = require('../../util/root');\nvar tryCatch_1 = require('../../util/tryCatch');\nvar errorObject_1 = require('../../util/errorObject');\nvar Observable_1 = require('../../Observable');\nvar Subscriber_1 = require('../../Subscriber');\nvar map_1 = require('../../operators/map');\nfunction getCORSRequest() {\n    if (root_1.root.XMLHttpRequest) {\n        return new root_1.root.XMLHttpRequest();\n    }\n    else if (!!root_1.root.XDomainRequest) {\n        return new root_1.root.XDomainRequest();\n    }\n    else {\n        throw new Error('CORS is not supported by your browser');\n    }\n}\nfunction getXMLHttpRequest() {\n    if (root_1.root.XMLHttpRequest) {\n        return new root_1.root.XMLHttpRequest();\n    }\n    else {\n        var progId = void 0;\n        try {\n            var progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'];\n            for (var i = 0; i < 3; i++) {\n                try {\n                    progId = progIds[i];\n                    if (new root_1.root.ActiveXObject(progId)) {\n                        break;\n                    }\n                }\n                catch (e) {\n                }\n            }\n            return new root_1.root.ActiveXObject(progId);\n        }\n        catch (e) {\n            throw new Error('XMLHttpRequest is not supported by your browser');\n        }\n    }\n}\nfunction ajaxGet(url, headers) {\n    if (headers === void 0) { headers = null; }\n    return new AjaxObservable({ method: 'GET', url: url, headers: headers });\n}\nexports.ajaxGet = ajaxGet;\n;\nfunction ajaxPost(url, body, headers) {\n    return new AjaxObservable({ method: 'POST', url: url, body: body, headers: headers });\n}\nexports.ajaxPost = ajaxPost;\n;\nfunction ajaxDelete(url, headers) {\n    return new AjaxObservable({ method: 'DELETE', url: url, headers: headers });\n}\nexports.ajaxDelete = ajaxDelete;\n;\nfunction ajaxPut(url, body, headers) {\n    return new AjaxObservable({ method: 'PUT', url: url, body: body, headers: headers });\n}\nexports.ajaxPut = ajaxPut;\n;\nfunction ajaxPatch(url, body, headers) {\n    return new AjaxObservable({ method: 'PATCH', url: url, body: body, headers: headers });\n}\nexports.ajaxPatch = ajaxPatch;\n;\nvar mapResponse = map_1.map(function (x, index) { return x.response; });\nfunction ajaxGetJSON(url, headers) {\n    return mapResponse(new AjaxObservable({\n        method: 'GET',\n        url: url,\n        responseType: 'json',\n        headers: headers\n    }));\n}\nexports.ajaxGetJSON = ajaxGetJSON;\n;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\nvar AjaxObservable = (function (_super) {\n    __extends(AjaxObservable, _super);\n    function AjaxObservable(urlOrRequest) {\n        _super.call(this);\n        var request = {\n            async: true,\n            createXHR: function () {\n                return this.crossDomain ? getCORSRequest.call(this) : getXMLHttpRequest();\n            },\n            crossDomain: false,\n            withCredentials: false,\n            headers: {},\n            method: 'GET',\n            responseType: 'json',\n            timeout: 0\n        };\n        if (typeof urlOrRequest === 'string') {\n            request.url = urlOrRequest;\n        }\n        else {\n            for (var prop in urlOrRequest) {\n                if (urlOrRequest.hasOwnProperty(prop)) {\n                    request[prop] = urlOrRequest[prop];\n                }\n            }\n        }\n        this.request = request;\n    }\n    /** @deprecated internal use only */ AjaxObservable.prototype._subscribe = function (subscriber) {\n        return new AjaxSubscriber(subscriber, this.request);\n    };\n    /**\n     * Creates an observable for an Ajax request with either a request object with\n     * url, headers, etc or a string for a URL.\n     *\n     * @example\n     * source = Rx.Observable.ajax('/products');\n     * source = Rx.Observable.ajax({ url: 'products', method: 'GET' });\n     *\n     * @param {string|Object} request Can be one of the following:\n     *   A string of the URL to make the Ajax call.\n     *   An object with the following properties\n     *   - url: URL of the request\n     *   - body: The body of the request\n     *   - method: Method of the request, such as GET, POST, PUT, PATCH, DELETE\n     *   - async: Whether the request is async\n     *   - headers: Optional headers\n     *   - crossDomain: true if a cross domain request, else false\n     *   - createXHR: a function to override if you need to use an alternate\n     *   XMLHttpRequest implementation.\n     *   - resultSelector: a function to use to alter the output value type of\n     *   the Observable. Gets {@link AjaxResponse} as an argument.\n     * @return {Observable} An observable sequence containing the XMLHttpRequest.\n     * @static true\n     * @name ajax\n     * @owner Observable\n    */\n    AjaxObservable.create = (function () {\n        var create = function (urlOrRequest) {\n            return new AjaxObservable(urlOrRequest);\n        };\n        create.get = ajaxGet;\n        create.post = ajaxPost;\n        create.delete = ajaxDelete;\n        create.put = ajaxPut;\n        create.patch = ajaxPatch;\n        create.getJSON = ajaxGetJSON;\n        return create;\n    })();\n    return AjaxObservable;\n}(Observable_1.Observable));\nexports.AjaxObservable = AjaxObservable;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar AjaxSubscriber = (function (_super) {\n    __extends(AjaxSubscriber, _super);\n    function AjaxSubscriber(destination, request) {\n        _super.call(this, destination);\n        this.request = request;\n        this.done = false;\n        var headers = request.headers = request.headers || {};\n        // force CORS if requested\n        if (!request.crossDomain && !headers['X-Requested-With']) {\n            headers['X-Requested-With'] = 'XMLHttpRequest';\n        }\n        // ensure content type is set\n        if (!('Content-Type' in headers) && !(root_1.root.FormData && request.body instanceof root_1.root.FormData) && typeof request.body !== 'undefined') {\n            headers['Content-Type'] = 'application/x-www-form-urlencoded; charset=UTF-8';\n        }\n        // properly serialize body\n        request.body = this.serializeBody(request.body, request.headers['Content-Type']);\n        this.send();\n    }\n    AjaxSubscriber.prototype.next = function (e) {\n        this.done = true;\n        var _a = this, xhr = _a.xhr, request = _a.request, destination = _a.destination;\n        var response = new AjaxResponse(e, xhr, request);\n        destination.next(response);\n    };\n    AjaxSubscriber.prototype.send = function () {\n        var _a = this, request = _a.request, _b = _a.request, user = _b.user, method = _b.method, url = _b.url, async = _b.async, password = _b.password, headers = _b.headers, body = _b.body;\n        var createXHR = request.createXHR;\n        var xhr = tryCatch_1.tryCatch(createXHR).call(request);\n        if (xhr === errorObject_1.errorObject) {\n            this.error(errorObject_1.errorObject.e);\n        }\n        else {\n            this.xhr = xhr;\n            // set up the events before open XHR\n            // https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest\n            // You need to add the event listeners before calling open() on the request.\n            // Otherwise the progress events will not fire.\n            this.setupEvents(xhr, request);\n            // open XHR\n            var result = void 0;\n            if (user) {\n                result = tryCatch_1.tryCatch(xhr.open).call(xhr, method, url, async, user, password);\n            }\n            else {\n                result = tryCatch_1.tryCatch(xhr.open).call(xhr, method, url, async);\n            }\n            if (result === errorObject_1.errorObject) {\n                this.error(errorObject_1.errorObject.e);\n                return null;\n            }\n            // timeout, responseType and withCredentials can be set once the XHR is open\n            if (async) {\n                xhr.timeout = request.timeout;\n                xhr.responseType = request.responseType;\n            }\n            if ('withCredentials' in xhr) {\n                xhr.withCredentials = !!request.withCredentials;\n            }\n            // set headers\n            this.setHeaders(xhr, headers);\n            // finally send the request\n            result = body ? tryCatch_1.tryCatch(xhr.send).call(xhr, body) : tryCatch_1.tryCatch(xhr.send).call(xhr);\n            if (result === errorObject_1.errorObject) {\n                this.error(errorObject_1.errorObject.e);\n                return null;\n            }\n        }\n        return xhr;\n    };\n    AjaxSubscriber.prototype.serializeBody = function (body, contentType) {\n        if (!body || typeof body === 'string') {\n            return body;\n        }\n        else if (root_1.root.FormData && body instanceof root_1.root.FormData) {\n            return body;\n        }\n        if (contentType) {\n            var splitIndex = contentType.indexOf(';');\n            if (splitIndex !== -1) {\n                contentType = contentType.substring(0, splitIndex);\n            }\n        }\n        switch (contentType) {\n            case 'application/x-www-form-urlencoded':\n                return Object.keys(body).map(function (key) { return (encodeURIComponent(key) + \"=\" + encodeURIComponent(body[key])); }).join('&');\n            case 'application/json':\n                return JSON.stringify(body);\n            default:\n                return body;\n        }\n    };\n    AjaxSubscriber.prototype.setHeaders = function (xhr, headers) {\n        for (var key in headers) {\n            if (headers.hasOwnProperty(key)) {\n                xhr.setRequestHeader(key, headers[key]);\n            }\n        }\n    };\n    AjaxSubscriber.prototype.setupEvents = function (xhr, request) {\n        var progressSubscriber = request.progressSubscriber;\n        function xhrTimeout(e) {\n            var _a = xhrTimeout, subscriber = _a.subscriber, progressSubscriber = _a.progressSubscriber, request = _a.request;\n            if (progressSubscriber) {\n                progressSubscriber.error(e);\n            }\n            subscriber.error(new AjaxTimeoutError(this, request)); //TODO: Make betterer.\n        }\n        ;\n        xhr.ontimeout = xhrTimeout;\n        xhrTimeout.request = request;\n        xhrTimeout.subscriber = this;\n        xhrTimeout.progressSubscriber = progressSubscriber;\n        if (xhr.upload && 'withCredentials' in xhr) {\n            if (progressSubscriber) {\n                var xhrProgress_1;\n                xhrProgress_1 = function (e) {\n                    var progressSubscriber = xhrProgress_1.progressSubscriber;\n                    progressSubscriber.next(e);\n                };\n                if (root_1.root.XDomainRequest) {\n                    xhr.onprogress = xhrProgress_1;\n                }\n                else {\n                    xhr.upload.onprogress = xhrProgress_1;\n                }\n                xhrProgress_1.progressSubscriber = progressSubscriber;\n            }\n            var xhrError_1;\n            xhrError_1 = function (e) {\n                var _a = xhrError_1, progressSubscriber = _a.progressSubscriber, subscriber = _a.subscriber, request = _a.request;\n                if (progressSubscriber) {\n                    progressSubscriber.error(e);\n                }\n                subscriber.error(new AjaxError('ajax error', this, request));\n            };\n            xhr.onerror = xhrError_1;\n            xhrError_1.request = request;\n            xhrError_1.subscriber = this;\n            xhrError_1.progressSubscriber = progressSubscriber;\n        }\n        function xhrReadyStateChange(e) {\n            var _a = xhrReadyStateChange, subscriber = _a.subscriber, progressSubscriber = _a.progressSubscriber, request = _a.request;\n            if (this.readyState === 4) {\n                // normalize IE9 bug (http://bugs.jquery.com/ticket/1450)\n                var status_1 = this.status === 1223 ? 204 : this.status;\n                var response = (this.responseType === 'text' ? (this.response || this.responseText) : this.response);\n                // fix status code when it is 0 (0 status is undocumented).\n                // Occurs when accessing file resources or on Android 4.1 stock browser\n                // while retrieving files from application cache.\n                if (status_1 === 0) {\n                    status_1 = response ? 200 : 0;\n                }\n                if (200 <= status_1 && status_1 < 300) {\n                    if (progressSubscriber) {\n                        progressSubscriber.complete();\n                    }\n                    subscriber.next(e);\n                    subscriber.complete();\n                }\n                else {\n                    if (progressSubscriber) {\n                        progressSubscriber.error(e);\n                    }\n                    subscriber.error(new AjaxError('ajax error ' + status_1, this, request));\n                }\n            }\n        }\n        ;\n        xhr.onreadystatechange = xhrReadyStateChange;\n        xhrReadyStateChange.subscriber = this;\n        xhrReadyStateChange.progressSubscriber = progressSubscriber;\n        xhrReadyStateChange.request = request;\n    };\n    AjaxSubscriber.prototype.unsubscribe = function () {\n        var _a = this, done = _a.done, xhr = _a.xhr;\n        if (!done && xhr && xhr.readyState !== 4 && typeof xhr.abort === 'function') {\n            xhr.abort();\n        }\n        _super.prototype.unsubscribe.call(this);\n    };\n    return AjaxSubscriber;\n}(Subscriber_1.Subscriber));\nexports.AjaxSubscriber = AjaxSubscriber;\n/**\n * A normalized AJAX response.\n *\n * @see {@link ajax}\n *\n * @class AjaxResponse\n */\nvar AjaxResponse = (function () {\n    function AjaxResponse(originalEvent, xhr, request) {\n        this.originalEvent = originalEvent;\n        this.xhr = xhr;\n        this.request = request;\n        this.status = xhr.status;\n        this.responseType = xhr.responseType || request.responseType;\n        this.response = parseXhrResponse(this.responseType, xhr);\n    }\n    return AjaxResponse;\n}());\nexports.AjaxResponse = AjaxResponse;\n/**\n * A normalized AJAX error.\n *\n * @see {@link ajax}\n *\n * @class AjaxError\n */\nvar AjaxError = (function (_super) {\n    __extends(AjaxError, _super);\n    function AjaxError(message, xhr, request) {\n        _super.call(this, message);\n        this.message = message;\n        this.xhr = xhr;\n        this.request = request;\n        this.status = xhr.status;\n        this.responseType = xhr.responseType || request.responseType;\n        this.response = parseXhrResponse(this.responseType, xhr);\n    }\n    return AjaxError;\n}(Error));\nexports.AjaxError = AjaxError;\nfunction parseXhrResponse(responseType, xhr) {\n    switch (responseType) {\n        case 'json':\n            if ('response' in xhr) {\n                //IE does not support json as responseType, parse it internally\n                return xhr.responseType ? xhr.response : JSON.parse(xhr.response || xhr.responseText || 'null');\n            }\n            else {\n                // HACK(benlesh): TypeScript shennanigans\n                // tslint:disable-next-line:no-any latest TS seems to think xhr is \"never\" here.\n                return JSON.parse(xhr.responseText || 'null');\n            }\n        case 'xml':\n            return xhr.responseXML;\n        case 'text':\n        default:\n            // HACK(benlesh): TypeScript shennanigans\n            // tslint:disable-next-line:no-any latest TS seems to think xhr is \"never\" here.\n            return ('response' in xhr) ? xhr.response : xhr.responseText;\n    }\n}\n/**\n * @see {@link ajax}\n *\n * @class AjaxTimeoutError\n */\nvar AjaxTimeoutError = (function (_super) {\n    __extends(AjaxTimeoutError, _super);\n    function AjaxTimeoutError(xhr, request) {\n        _super.call(this, 'ajax timeout', xhr, request);\n    }\n    return AjaxTimeoutError;\n}(AjaxError));\nexports.AjaxTimeoutError = AjaxTimeoutError;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}
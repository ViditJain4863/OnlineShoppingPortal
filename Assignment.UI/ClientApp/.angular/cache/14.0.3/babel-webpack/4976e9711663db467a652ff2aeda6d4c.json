{"ast":null,"code":"\"use strict\";\n\nvar ReplaySubject_1 = require('../ReplaySubject');\n/**\n * @method shareReplay\n * @owner Observable\n */\n\n\nfunction shareReplay(bufferSize, windowTime, scheduler) {\n  return function (source) {\n    return source.lift(shareReplayOperator(bufferSize, windowTime, scheduler));\n  };\n}\n\nexports.shareReplay = shareReplay;\n\nfunction shareReplayOperator(bufferSize, windowTime, scheduler) {\n  var subject;\n  var refCount = 0;\n  var subscription;\n  var hasError = false;\n  var isComplete = false;\n  return function shareReplayOperation(source) {\n    refCount++;\n\n    if (!subject || hasError) {\n      hasError = false;\n      subject = new ReplaySubject_1.ReplaySubject(bufferSize, windowTime, scheduler);\n      subscription = source.subscribe({\n        next: function (value) {\n          subject.next(value);\n        },\n        error: function (err) {\n          hasError = true;\n          subject.error(err);\n        },\n        complete: function () {\n          isComplete = true;\n          subject.complete();\n        }\n      });\n    }\n\n    var innerSub = subject.subscribe(this);\n    return function () {\n      refCount--;\n      innerSub.unsubscribe();\n\n      if (subscription && refCount === 0 && isComplete) {\n        subscription.unsubscribe();\n      }\n    };\n  };\n}\n\n;","map":{"version":3,"names":["ReplaySubject_1","require","shareReplay","bufferSize","windowTime","scheduler","source","lift","shareReplayOperator","exports","subject","refCount","subscription","hasError","isComplete","shareReplayOperation","ReplaySubject","subscribe","next","value","error","err","complete","innerSub","unsubscribe"],"sources":["C:/Users/vidit.jain/node_modules/rxjs/operators/shareReplay.js"],"sourcesContent":["\"use strict\";\nvar ReplaySubject_1 = require('../ReplaySubject');\n/**\n * @method shareReplay\n * @owner Observable\n */\nfunction shareReplay(bufferSize, windowTime, scheduler) {\n    return function (source) { return source.lift(shareReplayOperator(bufferSize, windowTime, scheduler)); };\n}\nexports.shareReplay = shareReplay;\nfunction shareReplayOperator(bufferSize, windowTime, scheduler) {\n    var subject;\n    var refCount = 0;\n    var subscription;\n    var hasError = false;\n    var isComplete = false;\n    return function shareReplayOperation(source) {\n        refCount++;\n        if (!subject || hasError) {\n            hasError = false;\n            subject = new ReplaySubject_1.ReplaySubject(bufferSize, windowTime, scheduler);\n            subscription = source.subscribe({\n                next: function (value) { subject.next(value); },\n                error: function (err) {\n                    hasError = true;\n                    subject.error(err);\n                },\n                complete: function () {\n                    isComplete = true;\n                    subject.complete();\n                },\n            });\n        }\n        var innerSub = subject.subscribe(this);\n        return function () {\n            refCount--;\n            innerSub.unsubscribe();\n            if (subscription && refCount === 0 && isComplete) {\n                subscription.unsubscribe();\n            }\n        };\n    };\n}\n;\n"],"mappings":"AAAA;;AACA,IAAIA,eAAe,GAAGC,OAAO,CAAC,kBAAD,CAA7B;AACA;AACA;AACA;AACA;;;AACA,SAASC,WAAT,CAAqBC,UAArB,EAAiCC,UAAjC,EAA6CC,SAA7C,EAAwD;EACpD,OAAO,UAAUC,MAAV,EAAkB;IAAE,OAAOA,MAAM,CAACC,IAAP,CAAYC,mBAAmB,CAACL,UAAD,EAAaC,UAAb,EAAyBC,SAAzB,CAA/B,CAAP;EAA6E,CAAxG;AACH;;AACDI,OAAO,CAACP,WAAR,GAAsBA,WAAtB;;AACA,SAASM,mBAAT,CAA6BL,UAA7B,EAAyCC,UAAzC,EAAqDC,SAArD,EAAgE;EAC5D,IAAIK,OAAJ;EACA,IAAIC,QAAQ,GAAG,CAAf;EACA,IAAIC,YAAJ;EACA,IAAIC,QAAQ,GAAG,KAAf;EACA,IAAIC,UAAU,GAAG,KAAjB;EACA,OAAO,SAASC,oBAAT,CAA8BT,MAA9B,EAAsC;IACzCK,QAAQ;;IACR,IAAI,CAACD,OAAD,IAAYG,QAAhB,EAA0B;MACtBA,QAAQ,GAAG,KAAX;MACAH,OAAO,GAAG,IAAIV,eAAe,CAACgB,aAApB,CAAkCb,UAAlC,EAA8CC,UAA9C,EAA0DC,SAA1D,CAAV;MACAO,YAAY,GAAGN,MAAM,CAACW,SAAP,CAAiB;QAC5BC,IAAI,EAAE,UAAUC,KAAV,EAAiB;UAAET,OAAO,CAACQ,IAAR,CAAaC,KAAb;QAAsB,CADnB;QAE5BC,KAAK,EAAE,UAAUC,GAAV,EAAe;UAClBR,QAAQ,GAAG,IAAX;UACAH,OAAO,CAACU,KAAR,CAAcC,GAAd;QACH,CAL2B;QAM5BC,QAAQ,EAAE,YAAY;UAClBR,UAAU,GAAG,IAAb;UACAJ,OAAO,CAACY,QAAR;QACH;MAT2B,CAAjB,CAAf;IAWH;;IACD,IAAIC,QAAQ,GAAGb,OAAO,CAACO,SAAR,CAAkB,IAAlB,CAAf;IACA,OAAO,YAAY;MACfN,QAAQ;MACRY,QAAQ,CAACC,WAAT;;MACA,IAAIZ,YAAY,IAAID,QAAQ,KAAK,CAA7B,IAAkCG,UAAtC,EAAkD;QAC9CF,YAAY,CAACY,WAAb;MACH;IACJ,CAND;EAOH,CAzBD;AA0BH;;AACD"},"metadata":{},"sourceType":"script"}